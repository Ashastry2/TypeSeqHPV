{
    "sbg:canvas_x": -402,
    "hints": [
        {
            "class": "sbg:AWSInstanceType",
            "value": "c4.8xlarge;ebs-gp2;700"
        },
        {
            "class": "sbg:maxNumberOfParallelInstances",
            "value": "12"
        }
    ],
    "requirements": [
        {
            "class": "sbg:Metadata"
        }
    ],
    "sbg:canvas_zoom": 0.7999999999999998,
    "sbg:revisionsInfo": [
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 0,
            "sbg:modifiedOn": 1526931208,
            "sbg:revisionNotes": "Copy of dave/rd111-typing-v2/ion-hpv-typeseqer/8"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 1,
            "sbg:modifiedOn": 1526931776,
            "sbg:revisionNotes": "moving to cgr apps folder"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 2,
            "sbg:modifiedOn": 1526932910,
            "sbg:revisionNotes": "exposed minimum lineage read count"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 3,
            "sbg:modifiedOn": 1526933968,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 4,
            "sbg:modifiedOn": 1527090949,
            "sbg:revisionNotes": "hpv_typing_report (Revision 1)  \"added conditional display\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 5,
            "sbg:modifiedOn": 1527091933,
            "sbg:revisionNotes": "added temporarily bam json output for testing"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 6,
            "sbg:modifiedOn": 1527192246,
            "sbg:revisionNotes": "hpv_typing_report \"fixing num types pos for grouped output\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 7,
            "sbg:modifiedOn": 1527192677,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 8,
            "sbg:modifiedOn": 1527620139,
            "sbg:revisionNotes": "added lineage code back in"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 9,
            "sbg:modifiedOn": 1527621216,
            "sbg:revisionNotes": "added scatter to bam_json"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 10,
            "sbg:modifiedOn": 1527625427,
            "sbg:revisionNotes": "read processor \"corrected lineage path args.R\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 11,
            "sbg:modifiedOn": 1527693072,
            "sbg:revisionNotes": "processor - \"removed and args.R typo\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 12,
            "sbg:modifiedOn": 1527694469,
            "sbg:revisionNotes": "added json splitter"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 13,
            "sbg:modifiedOn": 1527696804,
            "sbg:revisionNotes": "removed json splitter"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 14,
            "sbg:modifiedOn": 1527697105,
            "sbg:revisionNotes": "processor - \"correteing args.R issue\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 15,
            "sbg:modifiedOn": 1527870673,
            "sbg:revisionNotes": "added lineage table output"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 16,
            "sbg:modifiedOn": 1527871225,
            "sbg:revisionNotes": "report app - \"added lineage refernce table input\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 17,
            "sbg:modifiedOn": 1527873571,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 18,
            "sbg:modifiedOn": 1527875212,
            "sbg:revisionNotes": "fixing dag"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 19,
            "sbg:modifiedOn": 1527875232,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 20,
            "sbg:modifiedOn": 1527875261,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 21,
            "sbg:modifiedOn": 1527875271,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 22,
            "sbg:modifiedOn": 1527876630,
            "sbg:revisionNotes": "exposed pass through"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 23,
            "sbg:modifiedOn": 1527876947,
            "sbg:revisionNotes": ""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 24,
            "sbg:modifiedOn": 1527877327,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 25,
            "sbg:modifiedOn": 1527877694,
            "sbg:revisionNotes": "exposed params"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 26,
            "sbg:modifiedOn": 1527877735,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 27,
            "sbg:modifiedOn": 1528136626,
            "sbg:revisionNotes": "\"added safe lineage plot funciton\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 28,
            "sbg:modifiedOn": 1528136847,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 29,
            "sbg:modifiedOn": 1528139561,
            "sbg:revisionNotes": "\"removed last line of rscript syntax error\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 30,
            "sbg:modifiedOn": 1528139626,
            "sbg:revisionNotes": "cgc fix"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 31,
            "sbg:modifiedOn": 1528142036,
            "sbg:revisionNotes": "exposed is_torrent_server"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 32,
            "sbg:modifiedOn": 1528142443,
            "sbg:revisionNotes": "exposed is_torrent_server"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 33,
            "sbg:modifiedOn": 1528168503,
            "sbg:revisionNotes": "\"added is_tn\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 34,
            "sbg:modifiedOn": 1528168600,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 35,
            "sbg:modifiedOn": 1528301212,
            "sbg:revisionNotes": "dag stuff"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 36,
            "sbg:modifiedOn": 1528914156,
            "sbg:revisionNotes": "docs"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 37,
            "sbg:modifiedOn": 1528914196,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 38,
            "sbg:modifiedOn": 1529007013,
            "sbg:revisionNotes": "fixed get args in report"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 39,
            "sbg:modifiedOn": 1529007096,
            "sbg:revisionNotes": "fixed get args"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 40,
            "sbg:modifiedOn": 1529009499,
            "sbg:revisionNotes": "corrected args.R"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 41,
            "sbg:modifiedOn": 1529009758,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 42,
            "sbg:modifiedOn": 1529010040,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 43,
            "sbg:modifiedOn": 1529264599,
            "sbg:revisionNotes": "\"better lineage matrix and plots\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 44,
            "sbg:modifiedOn": 1529264691,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 45,
            "sbg:modifiedOn": 1530021378,
            "sbg:revisionNotes": "\"switched to TypeSeqer package\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 46,
            "sbg:modifiedOn": 1530021871,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 47,
            "sbg:modifiedOn": 1530026561,
            "sbg:revisionNotes": "corrected final_pn_matrix cp cmd"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 48,
            "sbg:modifiedOn": 1530026618,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 49,
            "sbg:modifiedOn": 1530037446,
            "sbg:revisionNotes": "put cp back in for ts"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 50,
            "sbg:modifiedOn": 1530037482,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 51,
            "sbg:modifiedOn": 1530046778,
            "sbg:revisionNotes": "removed links from tn html block"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 52,
            "sbg:modifiedOn": 1530046927,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 53,
            "sbg:modifiedOn": 1530099923,
            "sbg:revisionNotes": "corrected html page for thumbnail"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 54,
            "sbg:modifiedOn": 1530101389,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 55,
            "sbg:modifiedOn": 1531490670,
            "sbg:revisionNotes": "hpv_typing_report (Revision 19)  \"updated R package name\""
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 56,
            "sbg:modifiedOn": 1531490811,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 57,
            "sbg:modifiedOn": 1531494365,
            "sbg:revisionNotes": "fixing TypeSeqHPV R package name"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 58,
            "sbg:modifiedOn": 1531494417,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 59,
            "sbg:modifiedOn": 1531515803,
            "sbg:revisionNotes": "final_2018071301"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 60,
            "sbg:modifiedOn": 1531515884,
            "sbg:revisionNotes": null
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 61,
            "sbg:modifiedOn": 1532375241,
            "sbg:revisionNotes": "html block now in TypeSeq pakcage"
        },
        {
            "sbg:modifiedBy": "dave",
            "sbg:revision": 62,
            "sbg:modifiedOn": 1532375291,
            "sbg:revisionNotes": null
        }
    ],
    "sbg:canvas_y": 83,
    "sbg:publisher": "sbg",
    "sbg:image_url": "https://cgc.sbgenomics.com/ns/brood/images/dave/cgr-apps/ion-hpv-typeseqer/62.png",
    "sbg:revision": 62,
    "sbg:modifiedBy": "dave",
    "cwlVersion": "sbg:draft-2",
    "id": "https://cgc-api.sbgenomics.com/v2/apps/dave/cgr-apps/ion-hpv-typeseqer/62/raw/",
    "label": "hpv typing ion workflow",
    "sbg:toolAuthor": "cgrlab",
    "$namespaces": {
        "sbg": "https://sevenbridges.com"
    },
    "sbg:contributors": [
        "dave"
    ],
    "sbg:modifiedOn": 1532375291,
    "steps": [
        {
            "id": "#select_first_file_in_array",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "sbg:revisionNotes": "renamed output",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1492711798,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": "Copy of dave/cgrhpv/cat-json/4"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1492712033,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1492712213,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "renamed output"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:image_url": null,
                "sbg:revision": 2,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "files": [
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/IonXpress_075.bam"
                            },
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/IonXpress_076.split.bam"
                            }
                        ]
                    }
                },
                "sbg:latestRevision": 2,
                "baseCommand": [
                    "ls",
                    "-lhrt"
                ],
                "id": "dave/cgrhpv/select-first-file-in-array/2",
                "sbg:createdBy": "dave",
                "x": 532.7239379882812,
                "cwlVersion": "sbg:draft-2",
                "y": 20.915002822875977,
                "sbg:modifiedOn": 1492712213,
                "outputs": [
                    {
                        "id": "#first_file",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#files",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "$job.inputs.files[1].path"
                            }
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/select-first-file-in-array/2",
                "sbg:validationErrors": [],
                "inputs": [
                    {
                        "sbg:stageInput": "link",
                        "id": "#files",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "required": false
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1492711798,
                "sbg:projectName": "cgrHPV",
                "sbg:cmdPreview": "ls -lhrt",
                "sbg:project": "dave/cgrhpv",
                "label": "select first file in array",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 20.915002822875977,
            "sbg:x": 532.7239379882812,
            "inputs": [
                {
                    "id": "#select_first_file_in_array.files",
                    "source": [
                        "#input"
                    ]
                }
            ],
            "outputs": [
                {
                    "id": "#select_first_file_in_array.first_file"
                }
            ]
        },
        {
            "id": "#plugin_manifest_parse",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse:latest",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    },
                    {
                        "class": "CreateFileRequirement",
                        "fileDef": [
                            {
                                "filename": "args.R",
                                "fileContent": {
                                    "engine": "#cwl-js-engine",
                                    "class": "Expression",
                                    "script": "'# get args \\n\\\nargs_start_plugin_path = \"'+$job.inputs.startplugin_json.path+'\"'"
                                }
                            },
                            {
                                "filename": "plugin_manfiest_parse.R",
                                "fileContent": "require(jsonlite)\nrequire(tidyverse)\nrequire(stringr)\n\nsource(\"args.R\")\n\nplugin_json = fromJSON(args_start_plugin_path, simplifyDataFrame = TRUE, simplifyMatrix = TRUE)\n\nmanifest = data_frame(values = plugin_json$pluginconfig$typing_manifest) %>%\nmutate(values = str_replace(values, \"\\n\", \"\" )) %>%\nseparate(col=values, sep=\",\", into = unlist(str_split(.$values[1], \",\"))) %>%\nslice(2:n()) %>%\nwrite_csv(\"typing_manifest.csv\")\n\n# COMMAND ----------"
                            }
                        ]
                    }
                ],
                "sbg:revisionNotes": "added stringr",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1500589561,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1500589858,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1500603095,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "corrected args"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1500612528,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "fixing glob"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1507135221,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": "added passthrough parameter for manifest parse"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509470599,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "removed selecting only first 8 columns"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509810752,
                        "sbg:revision": 6,
                        "sbg:revisionNotes": "new parse method"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509810857,
                        "sbg:revision": 7,
                        "sbg:revisionNotes": "renamed passthrough"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509813246,
                        "sbg:revision": 8,
                        "sbg:revisionNotes": "updated base command"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509814378,
                        "sbg:revision": 9,
                        "sbg:revisionNotes": "added stringr"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:image_url": null,
                "sbg:revision": 9,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "manifest_json_parse_passthrough": true,
                        "startplugin_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/startplugin.json"
                        }
                    }
                },
                "sbg:latestRevision": 9,
                "baseCommand": [
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "if($job.inputs.manifest_json_parse_passthrough){\"cp \" + $job.inputs.startplugin_json.path + \" ./typing_manifest.csv\"}else{\"Rscript plugin_manfiest_parse.R\"} "
                    }
                ],
                "id": "dave/cgrhpv/plugin-manifest-parse/9",
                "sbg:createdBy": "dave",
                "x": 240.45729064941406,
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1509814378,
                "outputs": [
                    {
                        "id": "#manifest_csv",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "typing_manifest.csv"
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/plugin-manifest-parse/9",
                "y": 447.8442077636719,
                "inputs": [
                    {
                        "id": "#startplugin_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "id": "#manifest_json_parse_passthrough",
                        "type": [
                            "null",
                            "boolean"
                        ]
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1500589561,
                "sbg:validationErrors": [],
                "sbg:cmdPreview": "cp /path/to/startplugin.json ./typing_manifest.csv",
                "sbg:project": "dave/cgrhpv",
                "label": "plugin_manifest_parse",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 447.8442077636719,
            "sbg:x": 240.45729064941406,
            "inputs": [
                {
                    "id": "#plugin_manifest_parse.startplugin_json",
                    "source": "#run_manifest"
                },
                {
                    "default": false,
                    "id": "#plugin_manifest_parse.manifest_json_parse_passthrough",
                    "source": [
                        "#manifest_json_parse_passthrough"
                    ]
                }
            ],
            "outputs": [
                {
                    "id": "#plugin_manifest_parse.manifest_csv"
                }
            ]
        },
        {
            "id": "#plugin_control_defs_parse",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse:latest",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    },
                    {
                        "class": "CreateFileRequirement",
                        "fileDef": [
                            {
                                "filename": "args.R",
                                "fileContent": {
                                    "engine": "#cwl-js-engine",
                                    "class": "Expression",
                                    "script": "'# get args \\n\\\nargs_start_plugin_path = \"'+$job.inputs.startplugin_json.path+'\"'"
                                }
                            },
                            {
                                "filename": "plugin_control_defs_parse.R",
                                "fileContent": "require(jsonlite)\nrequire(tidyverse)\nrequire(stringr)\n\nsource(\"args.R\")\n\nplugin_json = fromJSON(args_start_plugin_path, simplifyDataFrame = TRUE, simplifyMatrix = TRUE)\n\nmanifest = data_frame(values = plugin_json$pluginconfig$control_definitions) %>%\nmutate(values = str_replace(values, \"\\n\", \"\" )) %>%\nseparate(col=values, sep=\",\", into = unlist(str_split(.$values[1], \",\"))) %>%\nslice(2:n()) %>%\nwrite_csv(\"control_defs.csv\")"
                            }
                        ]
                    }
                ],
                "sbg:revisionNotes": "corrected base command",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509812523,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": "Copy of dave/cgrhpv/plugin-manifest-parse/7"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509812900,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": "updated"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509813156,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "updated glob"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509814403,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "added stringr"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509815990,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": "corrected base command"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:image_url": null,
                "sbg:revision": 4,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "control_def_json_parse_passthrough": true,
                        "startplugin_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/startplugin.json"
                        }
                    }
                },
                "sbg:latestRevision": 4,
                "baseCommand": [
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "if($job.inputs.control_def_json_parse_passthrough){\"cp \" + $job.inputs.startplugin_json.path + \" ./control_defs.csv\"}else{\"Rscript plugin_control_defs_parse.R\"} "
                    }
                ],
                "id": "dave/cgrhpv/plugin-control-defs-parse/4",
                "sbg:createdBy": "dave",
                "x": 205.0703582763672,
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1509815990,
                "outputs": [
                    {
                        "id": "#control_defs",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#startplugin_json",
                            "glob": "control_defs.csv"
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/plugin-control-defs-parse/4",
                "y": 566.2462158203125,
                "inputs": [
                    {
                        "id": "#startplugin_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "id": "#control_def_json_parse_passthrough",
                        "type": [
                            "null",
                            "boolean"
                        ]
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1509812523,
                "sbg:validationErrors": [],
                "sbg:cmdPreview": "cp /path/to/startplugin.json ./control_defs.csv",
                "sbg:project": "dave/cgrhpv",
                "label": "plugin_control-defs-parse",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 566.2462158203125,
            "sbg:x": 205.0703582763672,
            "inputs": [
                {
                    "id": "#plugin_control_defs_parse.startplugin_json",
                    "source": "#control_definitions"
                },
                {
                    "default": false,
                    "id": "#plugin_control_defs_parse.control_def_json_parse_passthrough",
                    "source": [
                        "#control_def_json_parse_passthrough"
                    ]
                }
            ],
            "outputs": [
                {
                    "id": "#plugin_control_defs_parse.control_defs"
                }
            ]
        },
        {
            "id": "#plugin_report_grouping_parse",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse:latest",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    },
                    {
                        "class": "CreateFileRequirement",
                        "fileDef": [
                            {
                                "filename": "args.R",
                                "fileContent": {
                                    "engine": "#cwl-js-engine",
                                    "class": "Expression",
                                    "script": "'# get args \\n\\\nargs_start_plugin_path = \"'+$job.inputs.startplugin_json.path+'\"'"
                                }
                            },
                            {
                                "filename": "plugin_report_grouping_parse.R",
                                "fileContent": "require(jsonlite)\nrequire(tidyverse)\nrequire(stringr)\n\nsource(\"args.R\")\n\nplugin_json = fromJSON(args_start_plugin_path, simplifyDataFrame = TRUE, simplifyMatrix = TRUE)\n\nmanifest = data_frame(values = plugin_json$pluginconfig$report_grouping_definitions) %>%\nmutate(values = str_replace(values, \"\\n\", \"\" )) %>%\nseparate(col=values, sep=\",\", into = unlist(str_split(.$values[1], \",\"))) %>%\nslice(2:n()) %>%\nwrite_csv(\"report_grouping.csv\")"
                            }
                        ]
                    }
                ],
                "sbg:revisionNotes": "corrected command line",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509820752,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": "Copy of dave/cgrhpv/plugin-control-defs-parse/4"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509821106,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": "updated codes"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509821235,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "updated R code"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509821257,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "updated name"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1509823186,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": "corrected command line"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:image_url": null,
                "sbg:revision": 4,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "report_grouping_json_parse_passthrough": false,
                        "startplugin_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/startplugin.json"
                        }
                    }
                },
                "sbg:latestRevision": 4,
                "baseCommand": [
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "if($job.inputs.report_grouping_json_parse_passthrough){\"cp \" + $job.inputs.startplugin_json.path + \" ./report_grouping.csv\"}else{\"Rscript plugin_report_grouping_parse.R\"} "
                    }
                ],
                "id": "dave/cgrhpv/plugin-report-grouping-parse/4",
                "sbg:createdBy": "dave",
                "x": 249.80401611328125,
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1509823186,
                "outputs": [
                    {
                        "id": "#report_grouping",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#startplugin_json",
                            "glob": "report_grouping.csv"
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/plugin-report-grouping-parse/4",
                "y": 318.4773864746094,
                "inputs": [
                    {
                        "id": "#startplugin_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "id": "#report_grouping_json_parse_passthrough",
                        "type": [
                            "null",
                            "boolean"
                        ]
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1509820752,
                "sbg:validationErrors": [],
                "sbg:cmdPreview": "Rscript plugin_report_grouping_parse.R",
                "sbg:project": "dave/cgrhpv",
                "label": "plugin_report_grouping_parse",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 318.4773864746094,
            "sbg:x": 249.80401611328125,
            "inputs": [
                {
                    "id": "#plugin_report_grouping_parse.startplugin_json",
                    "source": "#report_grouping"
                },
                {
                    "default": false,
                    "id": "#plugin_report_grouping_parse.report_grouping_json_parse_passthrough",
                    "source": [
                        "#report_grouping_json_parse_passthrough"
                    ]
                }
            ],
            "outputs": [
                {
                    "id": "#plugin_report_grouping_parse.report_grouping"
                }
            ]
        },
        {
            "id": "#merge_read_metrics",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "arguments": [
                    {
                        "prefix": ">",
                        "position": 99,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "$job.inputs.prefix_for_output + \"_merged.json\""
                        }
                    }
                ],
                "sbg:revisionNotes": "added prefix input",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841449,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841686,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841826,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486858801,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486874369,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1494294732,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "made a better cat app"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1495472946,
                        "sbg:revision": 6,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248169,
                        "sbg:revision": 7,
                        "sbg:revisionNotes": "switched to wildcard"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248365,
                        "sbg:revision": 8,
                        "sbg:revisionNotes": "added prefix input"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:id": "dave/cgrhpv/cat-json/8",
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "json": [
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample01.json"
                            },
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample02.json"
                            }
                        ],
                        "input_suffix_and_extension": "concat.json",
                        "prefix_for_output": "HPV_all_vcf"
                    }
                },
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:latestRevision": 8,
                "id": "dave/cgrhpv/cat-json/8",
                "sbg:createdBy": "dave",
                "x": 984.531005859375,
                "cwlVersion": "sbg:draft-2",
                "y": 514.8192749023438,
                "sbg:modifiedOn": 1505248365,
                "inputs": [
                    {
                        "id": "#prefix_for_output",
                        "type": [
                            "null",
                            "string"
                        ]
                    },
                    {
                        "sbg:stageInput": "link",
                        "id": "#json",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "required": false
                    },
                    {
                        "id": "#input_suffix_and_extension",
                        "type": [
                            "null",
                            "string"
                        ]
                    }
                ],
                "outputs": [
                    {
                        "id": "#merged_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*merged.json\""
                            }
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:revision": 8,
                "sbg:image_url": null,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "cat",
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "'*' + $job.inputs.input_suffix_and_extension"
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1486841449,
                "sbg:cmdPreview": "cat *concat.json > HPV_all_vcf_merged.json",
                "sbg:project": "dave/cgrhpv",
                "label": "merge read metrics",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 514.8192749023438,
            "sbg:x": 984.531005859375,
            "inputs": [
                {
                    "id": "#merge_read_metrics.prefix_for_output",
                    "default": "read_metrics"
                },
                {
                    "id": "#merge_read_metrics.json",
                    "source": [
                        "#ion_torrent_typing_read_processor_1.read_metrics"
                    ]
                },
                {
                    "id": "#merge_read_metrics.input_suffix_and_extension",
                    "default": "read_metrics.json"
                }
            ],
            "outputs": [
                {
                    "id": "#merge_read_metrics.merged_json"
                }
            ]
        },
        {
            "id": "#merge_HPV_types",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "arguments": [
                    {
                        "prefix": ">",
                        "position": 99,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "$job.inputs.prefix_for_output + \"_merged.json\""
                        }
                    }
                ],
                "sbg:revisionNotes": "added prefix input",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841449,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841686,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841826,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486858801,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486874369,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1494294732,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "made a better cat app"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1495472946,
                        "sbg:revision": 6,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248169,
                        "sbg:revision": 7,
                        "sbg:revisionNotes": "switched to wildcard"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248365,
                        "sbg:revision": 8,
                        "sbg:revisionNotes": "added prefix input"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:id": "dave/cgrhpv/cat-json/8",
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "json": [
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample01.json"
                            },
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample02.json"
                            }
                        ],
                        "input_suffix_and_extension": "concat.json",
                        "prefix_for_output": "HPV_all_vcf"
                    }
                },
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:latestRevision": 8,
                "id": "dave/cgrhpv/cat-json/8",
                "sbg:createdBy": "dave",
                "x": 1048.531005859375,
                "cwlVersion": "sbg:draft-2",
                "y": 628.7393798828125,
                "sbg:modifiedOn": 1505248365,
                "inputs": [
                    {
                        "id": "#prefix_for_output",
                        "type": [
                            "null",
                            "string"
                        ]
                    },
                    {
                        "sbg:stageInput": "link",
                        "id": "#json",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "required": false
                    },
                    {
                        "id": "#input_suffix_and_extension",
                        "type": [
                            "null",
                            "string"
                        ]
                    }
                ],
                "outputs": [
                    {
                        "id": "#merged_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*merged.json\""
                            }
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:revision": 8,
                "sbg:image_url": null,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "cat",
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "'*' + $job.inputs.input_suffix_and_extension"
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1486841449,
                "sbg:cmdPreview": "cat *concat.json > HPV_all_vcf_merged.json",
                "sbg:project": "dave/cgrhpv",
                "label": "merge HPV types",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 628.7393798828125,
            "sbg:x": 1048.531005859375,
            "inputs": [
                {
                    "id": "#merge_HPV_types.prefix_for_output",
                    "default": "bc2_demultiplex"
                },
                {
                    "id": "#merge_HPV_types.json",
                    "source": [
                        "#ion_torrent_typing_read_processor_1.hpv_types"
                    ]
                },
                {
                    "id": "#merge_HPV_types.input_suffix_and_extension",
                    "default": "bc2_demultiplex.json"
                }
            ],
            "outputs": [
                {
                    "id": "#merge_HPV_types.merged_json"
                }
            ]
        },
        {
            "id": "#merge_lineage",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/tidyverse",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "arguments": [
                    {
                        "prefix": ">",
                        "position": 99,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "$job.inputs.prefix_for_output + \"_merged.json\""
                        }
                    }
                ],
                "sbg:revisionNotes": "added prefix input",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841449,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841686,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486841826,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486858801,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486874369,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1494294732,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "made a better cat app"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1495472946,
                        "sbg:revision": 6,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248169,
                        "sbg:revision": 7,
                        "sbg:revisionNotes": "switched to wildcard"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1505248365,
                        "sbg:revision": 8,
                        "sbg:revisionNotes": "added prefix input"
                    }
                ],
                "sbg:modifiedBy": "dave",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:id": "dave/cgrhpv/cat-json/8",
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "json": [
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample01.json"
                            },
                            {
                                "size": 0,
                                "secondaryFiles": [],
                                "class": "File",
                                "path": "path/to/sample02.json"
                            }
                        ],
                        "input_suffix_and_extension": "concat.json",
                        "prefix_for_output": "HPV_all_vcf"
                    }
                },
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:latestRevision": 8,
                "id": "dave/cgrhpv/cat-json/8",
                "sbg:createdBy": "dave",
                "x": 1131.457763671875,
                "cwlVersion": "sbg:draft-2",
                "y": 713.4400024414062,
                "sbg:modifiedOn": 1505248365,
                "inputs": [
                    {
                        "id": "#prefix_for_output",
                        "type": [
                            "null",
                            "string"
                        ]
                    },
                    {
                        "sbg:stageInput": "link",
                        "id": "#json",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "required": false
                    },
                    {
                        "id": "#input_suffix_and_extension",
                        "type": [
                            "null",
                            "string"
                        ]
                    }
                ],
                "outputs": [
                    {
                        "id": "#merged_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*merged.json\""
                            }
                        }
                    }
                ],
                "class": "CommandLineTool",
                "sbg:revision": 8,
                "sbg:image_url": null,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "cat",
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "'*' + $job.inputs.input_suffix_and_extension"
                    }
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1486841449,
                "sbg:cmdPreview": "cat *concat.json > HPV_all_vcf_merged.json",
                "sbg:project": "dave/cgrhpv",
                "label": "merge lineage",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 713.4400024414062,
            "sbg:x": 1131.457763671875,
            "inputs": [
                {
                    "id": "#merge_lineage.prefix_for_output",
                    "default": "lineage"
                },
                {
                    "id": "#merge_lineage.json",
                    "source": [
                        "#ion_torrent_typing_read_processor_1.hpv_lineage"
                    ]
                },
                {
                    "id": "#merge_lineage.input_suffix_and_extension",
                    "default": "hpv_lineage.json"
                }
            ],
            "outputs": [
                {
                    "id": "#merge_lineage.merged_json"
                }
            ]
        },
        {
            "id": "#Sambamba_View",
            "outputs": [
                {
                    "id": "#Sambamba_View.filtered"
                }
            ],
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "{\n  if ($job.inputs.reserved_threads) {\n    \n    return $job.inputs.reserved_threads\n    \n  } else if ($job.inputs.nthreads) {\n    \n    return $job.inputs.nthreads\n    \n  } else {\n    \n    return 1\n  }\n  \n}"
                        }
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "{\n  if ($job.inputs.mem_mb) {\n    \n    return $job.inputs.mem_mb\n    \n  } else {\n    \n    return 1024\n    \n  }\n  \n}"
                        }
                    },
                    {
                        "dockerPull": "cgrlab/typeseqer:latest",
                        "class": "DockerRequirement",
                        "dockerImageId": "59e577b13d5d"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "sbg:toolAuthor": "Artem Tarasov",
                "sbg:license": "GNU General Public License v2.0 only",
                "sbg:revisionNotes": "corrected command line and switch to typeseqer docker",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1485478878,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": "Copy of dave/cgrwgs/sambamba-view-0-5-9/1"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1486834921,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1520743858,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "corrected command line and switch to typeseqer docker"
                    }
                ],
                "sbg:cmdPreview": "/sambamba_v0.6.6 view --format=bam  /root/dir/example.bam -o example.filtered.bam",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:image_url": null,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 8,
                        "mem": 7
                    },
                    "inputs": {
                        "input": {
                            "secondaryFiles": [
                                {
                                    "path": ".bai"
                                }
                            ],
                            "path": "/root/dir/example.bam"
                        },
                        "reserved_threads": 8,
                        "subsample": 9.236016917973757,
                        "filter": "unmapped",
                        "output": "bam",
                        "mem_mb": 7,
                        "nthreads": null
                    }
                },
                "inputs": [
                    {
                        "id": "#with_header",
                        "label": "With header",
                        "description": "Print header before reads (always done for BAM output).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:altPrefix": "h",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--with-header",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#valid",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "label": "Valid",
                        "description": "Output only valid reads.",
                        "sbg:category": "Execution"
                    },
                    {
                        "id": "#subsampling_seed",
                        "label": "Subsampling seed",
                        "description": "Set seed for subsampling.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--subsampling-seed",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#subsample",
                        "label": "Subsample",
                        "sbg:stageInput": null,
                        "description": "Subsample reads (read pairs).",
                        "type": [
                            "null",
                            "float"
                        ],
                        "sbg:altPrefix": "s",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--subsample=",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#sam_input",
                        "label": "SAM input",
                        "description": "Specify that input is in SAM format.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:altPrefix": "S",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--sam-input",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "sbg:toolDefaultValue": "1",
                        "label": "Number of threads reserved on the instance",
                        "sbg:stageInput": null,
                        "description": "Number of threads reserved on the instance passed to the scheduler (number of jobs).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "id": "#reserved_threads",
                        "sbg:category": "Execution"
                    },
                    {
                        "id": "#regions",
                        "label": "Regions",
                        "required": false,
                        "sbg:fileTypes": "BED",
                        "description": "Output only reads overlapping one of regions from the BED file.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "sbg:altPrefix": "L",
                        "sbg:category": "File input.",
                        "inputBinding": {
                            "prefix": "--regions=",
                            "position": 0,
                            "separate": false,
                            "sbg:cmdInclude": true,
                            "secondaryFiles": []
                        }
                    },
                    {
                        "id": "#ref_filename",
                        "label": "Reference",
                        "required": false,
                        "sbg:fileTypes": "FASTA, FA",
                        "description": "Specify reference for writing CRAM.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "sbg:altPrefix": "T",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--ref-filename=",
                            "position": 0,
                            "separate": false,
                            "sbg:cmdInclude": true,
                            "secondaryFiles": []
                        }
                    },
                    {
                        "id": "#output",
                        "label": "Output format",
                        "description": "Specify which format to use for output (default is SAM).",
                        "type": [
                            {
                                "name": "output",
                                "symbols": [
                                    "sam",
                                    "bam",
                                    "cram",
                                    "json"
                                ],
                                "type": "enum"
                            }
                        ],
                        "sbg:altPrefix": "-f",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--format=",
                            "position": 1,
                            "separate": false,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "sbg:toolDefaultValue": "8",
                        "label": "Number of threads",
                        "sbg:category": "Execution",
                        "description": "Number of threads to use.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:altPrefix": "-t",
                        "id": "#nthreads",
                        "inputBinding": {
                            "prefix": "--nthreads=",
                            "position": 0,
                            "separate": false,
                            "sbg:cmdInclude": true,
                            "valueFrom": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "{\n  if ($job.inputs.nthreads)\n    return $job.inputs.nthreads\n  else\n    return 8\n}"
                            }
                        }
                    },
                    {
                        "sbg:toolDefaultValue": "1024",
                        "label": "Memory in MB",
                        "sbg:stageInput": null,
                        "description": "Memory in MB.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "id": "#mem_mb",
                        "sbg:category": "Execution"
                    },
                    {
                        "id": "#input",
                        "label": "Input",
                        "required": true,
                        "sbg:fileTypes": "BAM, SAM",
                        "description": "BAM or SAM file.",
                        "type": [
                            "File"
                        ],
                        "sbg:category": "Inputs",
                        "inputBinding": {
                            "secondaryFiles": [
                                ".bai"
                            ],
                            "separate": true,
                            "position": 2,
                            "sbg:cmdInclude": true,
                            "itemSeparator": " "
                        }
                    },
                    {
                        "id": "#filter",
                        "label": "Filter",
                        "description": "Set custom filter for alignments.",
                        "type": [
                            "null",
                            "string"
                        ],
                        "sbg:altPrefix": "-F",
                        "sbg:category": "Basic Options",
                        "inputBinding": {
                            "prefix": "--filter",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true,
                            "valueFrom": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "{\n  if ($job.inputs.filter)\n  {\n  \treturn '\"'.concat($job.inputs.filter, '\"')\n  }\n}"
                            },
                            "itemSeparator": " "
                        }
                    },
                    {
                        "id": "#cram_input",
                        "label": "CRAM input",
                        "description": "Specify that input is in CRAM format.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--cram-input",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#count",
                        "label": "Count",
                        "description": "Output to stdout only count of matching records, hHI are ignored.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:altPrefix": "c",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--count",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#compression_level",
                        "label": "Compression level",
                        "description": "Specify compression level (from 0 to 9, works only for BAM output).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:altPrefix": "l",
                        "sbg:category": "Execution",
                        "inputBinding": {
                            "prefix": "--compression-level",
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    }
                ],
                "sbg:latestRevision": 2,
                "$namespaces": {
                    "sbg": "https://sevenbridges.com"
                },
                "id": "dave/cgrhpv/sambamba-view-0-5-9/2",
                "sbg:createdBy": "dave",
                "arguments": [
                    {
                        "prefix": "-o",
                        "position": 3,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "{\n  fnameRegex = /^(.*?)(?:\\.([^.]+))?$/;\n  if ($job.inputs.input) \n  {\n  \tfile_path = $job.inputs.input.path;\n  \tbase_name = fnameRegex.exec(file_path)[1];\n  \tfile_name = base_name.replace(/^.*[\\\\\\/]/, '');\n  \n  if ($job.inputs.output == 'sam'){\n  \treturn file_name + '.filtered.sam'\n  }\n  else if ($job.inputs.output == 'bam'){\n  \treturn file_name.concat('.filtered.bam')\n  }\n  else if ($job.inputs.output == 'json'){\n  \treturn file_name.concat('.filtered.json')\n  }\n  else if ($job.inputs.output == 'msgpack'){\n  \treturn file_name.concat('.filtered.msgpack')\n  }\n  else\t{\n  \treturn file_name + '.filtered.sam'\n  }\n  }\n}"
                        }
                    }
                ],
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1520743858,
                "outputs": [
                    {
                        "id": "#filtered",
                        "label": "BAM file",
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#input",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "{\n  fnameRegex = /^(.*?)(?:\\.([^.]+))?$/;\n  file_path = $job.inputs.input.path;\n  base_name = fnameRegex.exec(file_path)[1];\n  file_name = base_name.replace(/^.*[\\\\\\/]/, '');\n  \n  if ($job.inputs.output == 'sam'){\n  \treturn file_name + '.filtered.sam'\n  }\n  else if ($job.inputs.output == 'bam'){\n  \treturn file_name.concat('.filtered.bam')\n  }\n  else if ($job.inputs.output == 'json'){\n  \treturn file_name.concat('.filtered.json')\n  }\n  else if ($job.inputs.output == 'msgpack'){\n  \treturn file_name.concat('.filtered.msgpack')\n  }\n  else\t{\n  \treturn file_name + '.filtered.sam'\n  }\n}"
                            }
                        },
                        "sbg:fileTypes": "BAM, SAM, JSON, MSGPACK",
                        "description": "Bam file.",
                        "type": [
                            "null",
                            "File"
                        ]
                    }
                ],
                "sbg:toolkit": "Sambamba",
                "sbg:sbgMaintained": false,
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/sambamba-view-0-5-9/2",
                "sbg:revision": 2,
                "sbg:toolkitVersion": "0.5.9",
                "y": 790.9749145507812,
                "sbg:modifiedBy": "dave",
                "baseCommand": [
                    "/sambamba_v0.6.6",
                    "view"
                ],
                "x": 682.8693237304688,
                "sbg:createdOn": 1485478878,
                "sbg:categories": [
                    "SAM/BAM-Processing"
                ],
                "sbg:validationErrors": [],
                "description": "Sambamba View efficiently filters a BAM file for alignments satisfying various conditions. It also accesses its SAM header and information about reference sequences. A JSON output is provided to make this data readily available for use with Perl, Python, and Ruby scripts.\n\nBy default, the tool expects a BAM file as an input. In order to work with a SAM file as an input, specify --sam-input command-line option. The tool does NOT automatically detect file format from its extension. Beware that when reading SAM, the tool will skip tags which don't conform to the SAM/BAM specification and set invalid fields to their default values. However, only syntax is checked, use --valid for full validation.",
                "sbg:project": "dave/cgrhpv",
                "label": "Sambamba View",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ],
                "sbg:links": [
                    {
                        "id": "http://lomereiter.github.io/sambamba/docs/sambamba-view.html",
                        "label": "Homepage"
                    },
                    {
                        "id": "https://github.com/lomereiter/sambamba",
                        "label": "Source code"
                    },
                    {
                        "id": "https://github.com/lomereiter/sambamba/wiki",
                        "label": "Wiki"
                    },
                    {
                        "id": "https://github.com/lomereiter/sambamba/releases/tag/v0.5.9",
                        "label": "Download"
                    },
                    {
                        "id": "http://lomereiter.github.io/sambamba/docs/sambamba-view.html",
                        "label": "Publication"
                    }
                ]
            },
            "scatter": "#Sambamba_View.input",
            "sbg:x": 682.8693237304688,
            "sbg:y": 790.9749145507812,
            "inputs": [
                {
                    "id": "#Sambamba_View.with_header"
                },
                {
                    "id": "#Sambamba_View.valid"
                },
                {
                    "id": "#Sambamba_View.subsampling_seed"
                },
                {
                    "id": "#Sambamba_View.subsample"
                },
                {
                    "id": "#Sambamba_View.sam_input"
                },
                {
                    "id": "#Sambamba_View.reserved_threads"
                },
                {
                    "id": "#Sambamba_View.regions"
                },
                {
                    "id": "#Sambamba_View.ref_filename"
                },
                {
                    "id": "#Sambamba_View.output",
                    "default": "json"
                },
                {
                    "id": "#Sambamba_View.nthreads"
                },
                {
                    "id": "#Sambamba_View.mem_mb",
                    "source": [
                        "#mem_mb"
                    ]
                },
                {
                    "id": "#Sambamba_View.input",
                    "source": "#input"
                },
                {
                    "id": "#Sambamba_View.filter"
                },
                {
                    "id": "#Sambamba_View.cram_input"
                },
                {
                    "id": "#Sambamba_View.count"
                },
                {
                    "id": "#Sambamba_View.compression_level"
                }
            ]
        },
        {
            "id": "#SAMtools_extract_SAM_BAM_header",
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    },
                    {
                        "dockerPull": "cgrlab/typeseqer:latest",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    }
                ],
                "sbg:toolAuthor": "Heng Li/Sanger Institute,  Bob Handsaker/Broad Institute, James Bonfield/Sanger Institute,",
                "sbg:license": "BSD License, MIT License",
                "sbg:revisionNotes": "cgrlab/typeseqer:latest",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1492714234,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": "Copy of admin/sbg-public-data/samtools-extract-bam-header-1-3/9"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1492714376,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": "no changes...just want to save a non-copy version in this project"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1495125186,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "removed aws instance hint"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1520717721,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "cgrlab/typeseqer:latest"
                    }
                ],
                "sbg:cmdPreview": "samtools view  input_bam_or_sam_file.bam  -H -o input_bam_or_sam_file.txt",
                "sbg:publisher": "sbg",
                "sbg:projectName": "cgrHPV",
                "sbg:image_url": null,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 1000
                    },
                    "inputs": {
                        "input_bam_or_sam_file": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "input_bam_or_sam_file.bam"
                        }
                    }
                },
                "inputs": [
                    {
                        "id": "#input_bam_or_sam_file",
                        "label": "BAM or SAM input file",
                        "required": true,
                        "sbg:fileTypes": "BAM, SAM",
                        "description": "BAM or SAM input file.",
                        "type": [
                            "File"
                        ],
                        "sbg:category": "File input",
                        "inputBinding": {
                            "secondaryFiles": [],
                            "separate": true,
                            "sbg:cmdInclude": true,
                            "position": 0
                        }
                    }
                ],
                "sbg:latestRevision": 3,
                "$namespaces": {
                    "sbg": "https://sevenbridges.com"
                },
                "id": "dave/cgrhpv/samtools-extract-bam-header-1-3/3",
                "sbg:createdBy": "dave",
                "arguments": [
                    {
                        "prefix": "-o",
                        "position": 2,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "{\n filepath = $job.inputs.input_bam_or_sam_file.path\n\n filename = filepath.split(\"/\").pop();\n\n file_dot_sep = filename.split(\".\");\n file_ext = file_dot_sep[file_dot_sep.length-1];\n\n new_filename = filename.substr(0,filename.lastIndexOf(\".\"));\n \n extension = '.txt'\n             \n return new_filename + extension; \n}"
                        }
                    },
                    {
                        "prefix": "",
                        "position": 1,
                        "separate": true,
                        "valueFrom": {
                            "engine": "#cwl-js-engine",
                            "class": "Expression",
                            "script": "{\nreturn '-H'\n}"
                        }
                    }
                ],
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1520717721,
                "outputs": [
                    {
                        "id": "#output_header_file",
                        "label": "Output header",
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#input_bam_or_sam_file",
                            "glob": "*.txt"
                        },
                        "sbg:fileTypes": "TXT",
                        "description": "Output header.",
                        "type": [
                            "File"
                        ]
                    }
                ],
                "sbg:toolkit": "SAMtools",
                "sbg:sbgMaintained": false,
                "class": "CommandLineTool",
                "sbg:id": "dave/cgrhpv/samtools-extract-bam-header-1-3/3",
                "sbg:revision": 3,
                "sbg:toolkitVersion": "v1.3",
                "y": 48.294185638427734,
                "sbg:modifiedBy": "dave",
                "baseCommand": [
                    "samtools",
                    "view"
                ],
                "x": 706.9485473632812,
                "sbg:createdOn": 1492714234,
                "sbg:categories": [
                    "SAM/BAM-Processing"
                ],
                "sbg:validationErrors": [],
                "description": "Extract the header from the alignment file in SAM or BAM formats.",
                "sbg:project": "dave/cgrhpv",
                "label": "SAMtools extract SAM/BAM header",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ],
                "sbg:links": [
                    {
                        "id": "http://www.htslib.org",
                        "label": "Homepage"
                    },
                    {
                        "id": "https://github.com/samtools/",
                        "label": "Source Code"
                    },
                    {
                        "id": "https://sourceforge.net/projects/samtools/files/samtools/",
                        "label": "Download"
                    },
                    {
                        "id": "http://www.ncbi.nlm.nih.gov/pubmed/19505943",
                        "label": "Publication"
                    },
                    {
                        "id": "http://www.htslib.org/doc/samtools.html",
                        "label": "Documentation"
                    },
                    {
                        "id": "http://www.htslib.org",
                        "label": "Wiki"
                    }
                ]
            },
            "sbg:y": 48.294185638427734,
            "sbg:x": 706.9485473632812,
            "inputs": [
                {
                    "id": "#SAMtools_extract_SAM_BAM_header.input_bam_or_sam_file",
                    "source": "#select_first_file_in_array.first_file"
                }
            ],
            "outputs": [
                {
                    "id": "#SAMtools_extract_SAM_BAM_header.output_header_file"
                }
            ]
        },
        {
            "id": "#ion_typeseqer_report",
            "run": {
                "sbg:revisionNotes": "",
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    },
                    {
                        "class": "CreateFileRequirement",
                        "fileDef": [
                            {
                                "filename": "args.R",
                                "fileContent": {
                                    "engine": "#cwl-js-engine",
                                    "class": "Expression",
                                    "script": "'# get args \\n\\\nargs_control_defs = \"'+$job.inputs.control_defs.path+'\" \\n\\\nargs_run_manifest_path =  \"'+$job.inputs.run_manifest.path+'\" \\n\\\nargs_bam_header_path =  \"'+$job.inputs.bam_header_file.path+'\" \\n\\\nargs_read_metrics_path = \"'+$job.inputs.read_metrics_json.path+'\" \\n\\\nargs_pos_neg_filtering_criteria_path = \"'+$job.inputs.pos_neg_filtering_criteria_path.path+'\" \\n\\\nargs_hpv_types_path = \"'+$job.inputs.hpv_types_json.path+'\" \\n\\\nargs_lineage_table_path = \"'+$job.inputs.lineage_table_json.path+'\" \\n\\\nargs_scaling_table = \"'+$job.inputs.scaling_table.path+'\" \\n\\\nargs_parameter_file_path = \"'+$job.inputs.parameter_file.path+'\" \\n\\\nargs_is_torrent_server = \"'+$job.inputs.is_torrent_server+'\" \\n\\\nargs_start_plugin_path = \"'+$job.inputs.startplugin_json.path+'\" \\n\\\nargs_lineage_reference_path = \"'+$job.inputs.lineage_reference_table.path+'\" \\n\\\nargs_custom_groups_path = \"'+$job.inputs.report_grouping_csv.path+'\"';"
                                }
                            }
                        ]
                    }
                ],
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 2000
                    },
                    {
                        "dockerPull": "cgrlab/typeseqhpv:final_2018071301",
                        "class": "DockerRequirement"
                    }
                ],
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 0,
                        "sbg:modifiedOn": 1526931198,
                        "sbg:revisionNotes": "Copy of dave/rd111-typing-v2/ion-typeseqer-report/5"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 1,
                        "sbg:modifiedOn": 1526931368,
                        "sbg:revisionNotes": "fixing num_types_positive in grouped samples only matrix"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 2,
                        "sbg:modifiedOn": 1527090879,
                        "sbg:revisionNotes": "added conditional display"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 3,
                        "sbg:modifiedOn": 1527192146,
                        "sbg:revisionNotes": "fixing num types pos for grouped output"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 4,
                        "sbg:modifiedOn": 1527870418,
                        "sbg:revisionNotes": "added lineage table to report"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 5,
                        "sbg:modifiedOn": 1527870640,
                        "sbg:revisionNotes": "added lineage table output glob"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 6,
                        "sbg:modifiedOn": 1527871115,
                        "sbg:revisionNotes": "added lineage refernce table input"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 7,
                        "sbg:modifiedOn": 1528136584,
                        "sbg:revisionNotes": "added safe lineage plot funciton"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 8,
                        "sbg:modifiedOn": 1528139518,
                        "sbg:revisionNotes": "removed last line of rscript syntax error"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 9,
                        "sbg:modifiedOn": 1528168462,
                        "sbg:revisionNotes": "added is_tn"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 10,
                        "sbg:modifiedOn": 1528910819,
                        "sbg:revisionNotes": "removed min lineage read count and create lineage output params b/c ot suing them also added much code docs"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 11,
                        "sbg:modifiedOn": 1529006928,
                        "sbg:revisionNotes": "rm lineage read count from args.R"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 12,
                        "sbg:modifiedOn": 1529009455,
                        "sbg:revisionNotes": "corrected args.R"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 13,
                        "sbg:modifiedOn": 1529264555,
                        "sbg:revisionNotes": "better lineage matrix and plots"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 14,
                        "sbg:modifiedOn": 1530021192,
                        "sbg:revisionNotes": "switched to TypeSeqer package"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 15,
                        "sbg:modifiedOn": 1530026494,
                        "sbg:revisionNotes": "corrected final_pn_matrix cp end cmd"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 16,
                        "sbg:modifiedOn": 1530036925,
                        "sbg:revisionNotes": "switched to typeseqerd2 docker"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 17,
                        "sbg:modifiedOn": 1530036999,
                        "sbg:revisionNotes": "put cp pdf back in for ts"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 18,
                        "sbg:modifiedOn": 1530046314,
                        "sbg:revisionNotes": "removed links from ts tn html block"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 19,
                        "sbg:modifiedOn": 1530099867,
                        "sbg:revisionNotes": ""
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 20,
                        "sbg:modifiedOn": 1531490619,
                        "sbg:revisionNotes": "updated R package name"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 21,
                        "sbg:modifiedOn": 1531494329,
                        "sbg:revisionNotes": "fixing R package name"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 22,
                        "sbg:modifiedOn": 1531515784,
                        "sbg:revisionNotes": "final_2018071301"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 23,
                        "sbg:modifiedOn": 1532375120,
                        "sbg:revisionNotes": "moved html block to TypeSeq pakcage"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:revision": 24,
                        "sbg:modifiedOn": 1532375182,
                        "sbg:revisionNotes": ""
                    }
                ],
                "sbg:cmdPreview": "Rscript -e 'require(rmarkdown); render(\"TypeSeqer_report_pdf.R\"); system(paste0(\"cp TypeSeqer_report_pdf.pdf \", pn_matrix$Assay_Batch_Code[1], \"_qc_report.pdf\")); render(\"hpv_typing_html.R\") ' 1>&2",
                "sbg:publisher": "sbg",
                "sbg:id": "dave/cgr-apps/ion-typeseqer-report/24",
                "sbg:revision": 24,
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 2000
                    },
                    "inputs": {
                        "read_metrics_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/read_metrics.json"
                        },
                        "bam_header_file": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/header_file.txt"
                        },
                        "lineage_table_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "path/to/merged_lineage.json"
                        },
                        "run_manifest": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "path/to/run_manifest.csv"
                        },
                        "create_lineage_table_output": true,
                        "report_grouping_csv": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/report_grouping_csv.ext"
                        },
                        "scaling_table": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/scaling_table.csv"
                        },
                        "startplugin_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/startplugin_json.ext"
                        },
                        "hpv_types_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "path/to/merged_hpv_types.json"
                        },
                        "is_torrent_server": true,
                        "min_lineage_read_count": 5,
                        "parameter_file": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/parameter_file.csv"
                        },
                        "control_defs": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/control_defs.csv"
                        },
                        "pos_neg_filtering_criteria_path": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/2017-06-11_Pos-Neg_matrix_filtering_criteria_RefTable_v3.txt"
                        }
                    }
                },
                "sbg:latestRevision": 24,
                "$namespaces": {
                    "sbg": "https://sevenbridges.com"
                },
                "id": "dave/cgr-apps/ion-typeseqer-report/24",
                "sbg:createdBy": "dave",
                "x": 1397.2523584960438,
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1532375182,
                "inputs": [
                    {
                        "id": "#startplugin_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "id": "#scaling_table",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "sbg:fileTypes": "CSV"
                    },
                    {
                        "default": "",
                        "id": "#run_manifest",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    },
                    {
                        "id": "#report_grouping_csv",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "default": "",
                        "id": "#read_metrics_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    },
                    {
                        "id": "#pos_neg_filtering_criteria_path",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "default": "",
                        "id": "#parameter_file",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    },
                    {
                        "default": "",
                        "id": "#lineage_table_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    },
                    {
                        "label": "lineage reference table",
                        "id": "#lineage_reference_table",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "sbg:stageInput": null,
                        "id": "#is_torrent_server",
                        "type": [
                            "null",
                            "boolean"
                        ]
                    },
                    {
                        "default": "",
                        "id": "#hpv_types_json",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    },
                    {
                        "id": "#control_defs",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "default": "",
                        "id": "#bam_header_file",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false,
                        "streamable": false
                    }
                ],
                "outputs": [
                    {
                        "id": "#samples_only_matrix",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*samples_only_matrix.csv\""
                            }
                        }
                    },
                    {
                        "id": "#read_metrics_csv",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*read_metrics.csv'"
                            }
                        },
                        "streamable": false
                    },
                    {
                        "id": "#pos_neg_matrix",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*pn_matrix.csv\""
                            }
                        }
                    },
                    {
                        "id": "#plot_data",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*plot_data.csv\""
                            }
                        }
                    },
                    {
                        "id": "#pdf_report",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*pdf'"
                            }
                        }
                    },
                    {
                        "id": "#lineage_table",
                        "type": [
                            "null",
                            "File"
                        ],
                        "label": "lineage table",
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#hpv_types_json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*lineage_matrix.csv\""
                            }
                        }
                    },
                    {
                        "id": "#hpv_read_counts_matrix",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#run_manifest",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*hpv_read_counts_matrix.csv'"
                            }
                        },
                        "streamable": false
                    },
                    {
                        "id": "#failed_samples_matrix",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#hpv_types_json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "\"*failed_samples_matrix.csv\""
                            }
                        }
                    },
                    {
                        "id": "#control_matrix",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "sbg:inheritMetadataFrom": "#hpv_types_json",
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*control_results.csv'"
                            }
                        }
                    }
                ],
                "sbg:modifiedBy": "dave",
                "class": "CommandLineTool",
                "y": 194.73211945699865,
                "sbg:image_url": null,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "Rscript",
                    "-e",
                    "'require(devtools);",
                    "require(rmarkdown);",
                    {
                        "engine": "#cwl-js-engine",
                        "class": "Expression",
                        "script": "\nif ($job.inputs.is_torrent_server) {\n    'system(paste0(\"cp \", system.file(\"extdata/ion_report\", \"Ion_Torrent_report.R\", package = \"TypeSeqHPV\"),\" ./\")); render(\"Ion_Torrent_report.R\"); system(paste0(\"cp Ion_Torrent_report.pdf \", final_pn_matrix$Assay_Batch_Code[1], \"_qc_report.pdf\")); system(paste0(\"cp \", system.file(\"extdata/ion_report\", \"torrent_server_html_block.R\", package = \"TypeSeqHPV\"),\" ./\")); render(\"torrent_server_html_block.R\")'}\n\nelse {'run_type = \"not_ts\"; install_github(\"cgrlab/TypeSeqHPV\", force=TRUE); system(paste0(\"cp \", system.file(\"extdata/ion_report\", \"Ion_Torrent_report.R\", package = \"TypeSeqHPV\"),\" ./\")); render(\"Ion_Torrent_report.R\"); system(paste0(\"mv Ion_Torrent_report.pdf \", final_pn_matrix$Assay_Batch_Code[1], \"_qc_report.pdf\"))'}"
                    },
                    "'",
                    "1>&2"
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1526931198,
                "sbg:projectName": "CGR_Apps",
                "sbg:project": "dave/cgr-apps",
                "label": "hpv_typing_report",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "sbg:y": 194.73211945699865,
            "sbg:x": 1397.2523584960438,
            "inputs": [
                {
                    "id": "#ion_typeseqer_report.startplugin_json",
                    "source": "#run_manifest"
                },
                {
                    "id": "#ion_typeseqer_report.scaling_table",
                    "source": "#scaling_table"
                },
                {
                    "id": "#ion_typeseqer_report.run_manifest",
                    "source": "#plugin_manifest_parse.manifest_csv"
                },
                {
                    "id": "#ion_typeseqer_report.report_grouping_csv",
                    "source": "#plugin_report_grouping_parse.report_grouping"
                },
                {
                    "id": "#ion_typeseqer_report.read_metrics_json",
                    "source": "#merge_read_metrics.merged_json"
                },
                {
                    "id": "#ion_typeseqer_report.pos_neg_filtering_criteria_path",
                    "source": "#pos_neg_filtering_criteria_path"
                },
                {
                    "id": "#ion_typeseqer_report.parameter_file",
                    "source": "#parameter_file"
                },
                {
                    "id": "#ion_typeseqer_report.lineage_table_json",
                    "source": "#merge_lineage.merged_json"
                },
                {
                    "id": "#ion_typeseqer_report.lineage_reference_table",
                    "source": "#lineage_reference_table"
                },
                {
                    "id": "#ion_typeseqer_report.is_torrent_server",
                    "source": [
                        "#is_torrent_server"
                    ]
                },
                {
                    "id": "#ion_typeseqer_report.hpv_types_json",
                    "source": "#merge_HPV_types.merged_json"
                },
                {
                    "id": "#ion_typeseqer_report.control_defs",
                    "source": "#plugin_control_defs_parse.control_defs"
                },
                {
                    "id": "#ion_typeseqer_report.bam_header_file",
                    "source": "#SAMtools_extract_SAM_BAM_header.output_header_file"
                }
            ],
            "outputs": [
                {
                    "id": "#ion_typeseqer_report.samples_only_matrix"
                },
                {
                    "id": "#ion_typeseqer_report.read_metrics_csv"
                },
                {
                    "id": "#ion_typeseqer_report.pos_neg_matrix"
                },
                {
                    "id": "#ion_typeseqer_report.plot_data"
                },
                {
                    "id": "#ion_typeseqer_report.pdf_report"
                },
                {
                    "id": "#ion_typeseqer_report.lineage_table"
                },
                {
                    "id": "#ion_typeseqer_report.hpv_read_counts_matrix"
                },
                {
                    "id": "#ion_typeseqer_report.failed_samples_matrix"
                },
                {
                    "id": "#ion_typeseqer_report.control_matrix"
                }
            ]
        },
        {
            "id": "#ion_torrent_typing_read_processor_1",
            "outputs": [
                {
                    "id": "#ion_torrent_typing_read_processor_1.read_metrics"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.hpv_types"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.hpv_lineage"
                }
            ],
            "run": {
                "hints": [
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 2000
                    },
                    {
                        "dockerPull": "cgrlab/typeseqer:0.5.02",
                        "class": "DockerRequirement"
                    }
                ],
                "requirements": [
                    {
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "dockerPull": "rabix/js-engine",
                                "class": "DockerRequirement"
                            }
                        ],
                        "id": "#cwl-js-engine"
                    },
                    {
                        "class": "CreateFileRequirement",
                        "fileDef": [
                            {
                                "filename": "args.R",
                                "fileContent": {
                                    "engine": "#cwl-js-engine",
                                    "class": "Expression",
                                    "script": "\n'# get args \\n\\\nargs_create_lineage_table_output = \"'+$job.inputs.create_lineage_table_output+'\" \\n\\\nargs_bam_json = data_frame(path = \"'+$job.inputs.bam_json.path+'\", name = \"'+$job.inputs.bam_json.path.split(\"/\").reverse()[0].split(\".split.json\")[0]+'\") \\n\\\nargs_A_barcode = \"A'+$job.inputs.bam_json.path.split(\"IonXpress_\").reverse()[0].substr(1,2)+'\" \\n\\\nargs_lineage_reference_path = \"'+$job.inputs.lineage_reference_table.path+'\" \\n\\\nargs_barcode_list = \"'+$job.inputs.barcode_list.path+'\" \\n\\\nargs_parameter_file = data_frame(path = \"'+$job.inputs.parameter_file.path+'\")'"
                                }
                            },
                            {
                                "filename": "ion_torrent_typing_read_processor.R",
                                "fileContent": "# Databricks notebook source\n# load packages\n\nif (!exists(\"is_batch\")) {library(SparkR)}\n\ndynamic_require = function(x){\n  for( i in x ){\n    #  require returns TRUE invisibly if it was able to load package\n    if( ! require( i , character.only = TRUE ) ){\n      #  If package was not able to be loaded then re-install\n      install.packages( i , dependencies = TRUE )\n      #  Load package after installing\n      require( i , character.only = TRUE )\n    }\n  }\n}\n\ndynamic_require(c(\"tidyverse\",\n                  \"jsonlite\"))\n\ndynamic_require_bioc = function(x){\n  for( i in x ){\n    #  require returns TRUE invisibly if it was able to load package\n    if( ! require( i , character.only = TRUE ) ){\n      #  If package was not able to be loaded then re-install\n      source(\"https://bioconductor.org/biocLite.R\")\n      biocLite(i)\n      install.packages( i , dependencies = TRUE )\n      #  Load package after installing\n      require( i , character.only = TRUE )\n    }\n  }\n}\n\ndynamic_require_bioc(\"GenomicAlignments\")\n\nsessionInfo()\n\n\n# COMMAND ----------\n\nif (!exists(\"is_batch\")) {\n\nsystem(\"rm -r /databricks/driver/TypeSeqerHpvIon\") \nsystem(\"mkdir /databricks/driver/TypeSeqerHpvIon\")\nsetwd(\"/databricks/driver/TypeSeqerHpvIon\")  \n  \nargs_create_lineage_table_output = \"true\" \n\nargs_bam_json = data_frame(path = \"/databricks/driver/TypeSeqerHpvIon/IX68_200k.json\", name = \"IonXpress_068_rawlib.filtered.json\") \n\nargs_A_barcode = \"A68\" \n\nargs_lineage_reference_path=\"/dbfs/FileStore/projects/RD111_TypeSeqer/lineage_test/20180121_lineage_reference_table_and_filters_2.csv\"\n\nargs_barcode_list = \"/dbfs/FileStore/projects/RD111_TypeSeqer/lineage_test/barcodeList_v1.csv\" \n\nargs_parameter_file = data_frame(path = \"/dbfs/FileStore/projects/RD111_TypeSeqer/lineage_test/hpv_types_MQ_min_max_len_filters_JUNE2017_30-10bpLen_v6.txt\")\n  \nsystem(\"touch args.R\")\n  \n#create a smaller version of the raw reads bam json\n\nsystem(\"head -n 200000 /dbfs/FileStore/projects/RD111_TypeSeqer/lineage_test/IonXpress_068_rawlib.filtered.json > /databricks/driver/TypeSeqerHpvIon/IX68_200k.json\")\n\n}\n\n# COMMAND ----------\n\nread_lines(\"args.R\") %>% \nwriteLines()\nsource(\"args.R\")\n\n# COMMAND ----------\n\n# MAGIC %md\n# MAGIC \n# MAGIC ##Below are 2 functions used in this read processor app.\n# MAGIC \n# MAGIC * Read Metrics  \n# MAGIC * Barcode 2 demultiplex (includes lineage detectin inside this function)\n\n# COMMAND ----------\n\n# here are 3 funcions that are used in this run processor app\nts_read_metrics = function(bam_json_input, parameters_df_input){\n\n# only used in a jsonlite streaming function\n\nif(\"ZA\" %in% colnames(bam_json_input$tags)){ ZA_df = data_frame(ZA = bam_json_input$tags$ZA)}else{ZA_df = data_frame(ZA = rep(0, length(bam_json_input$qname)))}\n\nbam_json = bam_json_input %>%\nselect(qname, HPV_Type = rname, seq, mapq, cigar) %>%\nmutate(page_num = page) %>%\nbind_cols(ZA_df) %>%\nmutate(ZA = ifelse(is.na(ZA), 0, ZA)) %>%\nmutate(bc1_id = args_A_barcode) %>%\nmutate(file_name = args_bam_json$name) %>%\nmutate(total_reads = n()) %>%\n  \n# left join with parameters file that contians qualifying criteria for each hpv contig\nleft_join(parameters_df_input) %>%\n  \n# mapq greater than 0 - count multi-mapped / 0 mapping quaity and filter becuase cigar will be 0 so we cannot include past here\nmutate(mapq_greater_than_zero = ifelse(mapq != 0, 1, 0)) %>%\nmutate(mapq_greater_than_zero = sum(mapq_greater_than_zero)) %>%\nfilter(mapq > 0) %>%\n  \n# ZA\nmutate(pass_za = ifelse(str_length(seq) == ZA, 1, 0)) %>%\n  \n# aligned length within specific parameters\nmutate(cigar_seq = as.character(sequenceLayer(DNAStringSet(seq), cigar))) %>%\nmutate(cigar_len = str_length(cigar_seq)) %>%\nmutate(pass_seq_length = ifelse(\n  cigar_len >= min_len, ifelse(\n  cigar_len <= max_len, ifelse(\n  pass_za == 1, 1, 0), 0), 0)) %>%\n  \n# mapq is greater than specific parameters\nmutate(pass_mapq = ifelse(mapq >= min_mq, 1, 0)) %>%\n\nmutate(pass_mapq = ifelse(\n  mapq >= min_mq, ifelse(\n  pass_seq_length == 1, ifelse(\n  pass_za == 1, 1, 0), 0), 0)) %>%\n\n# sum up\nmutate(pass_za = sum(pass_za)) %>%\nmutate(pass_seq_length = sum(pass_seq_length)) %>%\nmutate(pass_mapq = sum(pass_mapq)) %>%\n# select the final colums and compress down to 1 row with distinct()\nselect(page_num, bc1_id, total_reads, mapq_greater_than_zero, pass_za, pass_seq_length, pass_mapq, file_name) %>%\ndistinct()\n  \n    \n}\n\n# COMMAND ----------\n\nts_demultiplex_bc2 = function(bam_json_input, parameters_df_input, barcode_list_input){\n\nif(\"ZA\" %in% colnames(bam_json_input$tags)){ ZA_df = data_frame(ZA = bam_json_input$tags$ZA)}else{ZA_df = data_frame(ZA = rep(0, length(bam_json_input$qname)))}\n\nbam_json = bam_json_input %>%\nselect(qname, HPV_Type = rname, seq, mapq, cigar) %>%\nmutate(page_num = page) %>%\nbind_cols(ZA_df) %>%\nmutate(ZA = ifelse(is.na(ZA), 0, ZA)) %>%\nmutate(bc1_id = args_A_barcode) %>%\nmutate(file_name = args_bam_json$name) %>%\nmutate(total_reads = n()) %>%\nmutate(seq_length = str_length(seq)) %>%\nleft_join(parameters_df) %>%\n\n# Filter 1 - mapq > 0 ----\nfilter(mapq > 0) %>%\n  \n# Filter 2 - ZA  ----\nfilter(str_length(seq) == ZA) %>%\n\n# Filter 3 - aligned length within specific parameters ----\nmutate(cigar_seq = as.character(sequenceLayer(DNAStringSet(seq), cigar))) %>%\nmutate(cigar_len = str_length(cigar_seq)) %>%\nfilter(cigar_len >= min_len & cigar_len <= max_len) %>%\n\n# Filter 4 - mapq is greater than specific parameters ----\nfilter(mapq >= min_mq)\n\n # filter 5 - barcode is perfect match ----\n\nbam_json_with_barcode = barcode_list %>%\nselect(bc2_id = id, bc_sequence = sequence, bc_adapter = adapter) %>%\nfilter(str_sub(bc2_id, end =1) == \"P\") %>%\nmutate(bc_length = str_length(bc_sequence)) %>%\ngroup_by(bc2_id, bc_sequence) %>%\ndo({\nbc_length = .$bc_length\nbc_sequence = .$bc_sequence\n\nbam_json_temp = bam_json %>%\nmutate(three_prime_seq = str_sub(seq, start = -(bc_length))) %>%\nfilter(three_prime_seq == bc_sequence)\n\n}) %>%\nungroup() %>%\nmutate(qualified_barcode_reads = n()) %>%\ngroup_by(file_name, bc1_id, bc2_id, HPV_Type) %>%\nmutate(HPV_Type_count = n()) %>%\nungroup()\n\n### lineage for 2017 ###\nlineage_output = bam_json_with_barcode %>%\nselect(bc1_id, bc2_id, qname, HPV_Type, mapq, cigar_seq, HPV_Type_count) %>%\ninner_join(lineage_reference_table, by = \"HPV_Type\") %>%\nmutate(lineage_tag = \"No value\") %>% \nmutate(lineage_tag = ifelse(str_sub(cigar_seq, Base_num, Base_num) == Base_ID,\n                            paste0(HPV_Type,\"_\", Lineage_ID), \"undetermined\")) %>%\ngroup_by(qname, HPV_Type, Lineage_ID) %>%\nmutate(lineage_tag = paste(lineage_tag, collapse = \",\")) %>%\nungroup() %>%\nselect(bc1_id, bc2_id,qname, HPV_Type, Lineage_ID, lineage_tag, cigar_seq, mapq, HPV_Type_count) %>%\ndistinct() %>%\nmutate(total_reads = n()) %>%\nmutate(lineage_tag = ifelse(str_detect(lineage_tag, \"undetermined\"), \"undetermined\", \"full match\")) %>%\ngroup_by(bc1_id, bc2_id, HPV_Type, Lineage_ID, lineage_tag) %>% \nmutate(lineage_read_count = n()) %>%\nungroup() %>%\nmutate(page_num = page) %>%\nselect(bc1_id, bc2_id, page_num, HPV_Type, Lineage_ID, lineage_tag, lineage_read_count, HPV_Type_count) %>%\ndistinct()\n####   \n  \n#### finish the bc2 demultiplex df ####\nhpv_types_output = bam_json_with_barcode %>%  \nselect(file_name, page_num, bc1_id, bc2_id, qualified_barcode_reads, HPV_Type, HPV_Type_count, display_order) %>%\ndistinct()\n  \n### make a list output ###\noutput = list(hpv_types_output = hpv_types_output, lineage_output = lineage_output)\n\n}\n\n# COMMAND ----------\n\nparameters_df = read_tsv(args_parameter_file$path) %>% \nmap_if(is.factor, as.character) %>% \nas_tibble() %>% \nmutate(min_mq = mq) %>% \nselect(-mq)\n\nlineage_reference_table = read_csv(args_lineage_reference_path) %>%\nmap_if(is.factor, as.character) %>% \nas_tibble() %>% \nglimpse()\n\nbarcode_list = read_csv(args_barcode_list)\npage = 1\n\n# COMMAND ----------\n\nread_metrics_output = file(paste0(args_bam_json$name,\"_read_metrics.json\"), open = \"wb\")\nbc2_demultiplex_output = file(paste0(args_bam_json$name,\"_bc2_demultiplex.json\"), open = \"wb\")\nlineage_output = file(paste0(args_bam_json$name,\"_hpv_lineage.json\"),open = \"wb\")\n\nstream_in(file(args_bam_json$path), handler = function(df){\n\nread_metrics_df = df %>% \nts_read_metrics(parameters_df)\n  \n\nbc2_demultiplex_df = df %>% \nts_demultiplex_bc2(parameters_df, barcode_list)\n\nstream_out(read_metrics_df, read_metrics_output, verbose = TRUE) \n  \nstream_out(bc2_demultiplex_df$hpv_types_output, bc2_demultiplex_output, verbose = TRUE) \n  \nstream_out(bc2_demultiplex_df$lineage_output, lineage_output, verbose = TRUE) \n  \npage <<- page + 1\n\n}, pagesize = 10000, verbose = FALSE)\n\nclose(read_metrics_output)\nclose(bc2_demultiplex_output)\nclose(lineage_output)"
                            }
                        ]
                    }
                ],
                "arguments": [
                    {
                        "position": 100,
                        "separate": true,
                        "valueFrom": "1>&2"
                    }
                ],
                "sbg:revisionNotes": "correteing args.R issue",
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1526505561,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1526505586,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1527619937,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": "added lineage code back in"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1527625377,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "corrected lineage path args.R"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1527693022,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": "removed and args.R typo"
                    },
                    {
                        "sbg:modifiedBy": "dave",
                        "sbg:modifiedOn": 1527697061,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "correteing args.R issue"
                    }
                ],
                "sbg:cmdPreview": "Rscript ion_torrent_typing_read_processor.R  1>&2",
                "sbg:publisher": "sbg",
                "sbg:projectName": "CGR_Apps",
                "sbg:id": "dave/cgr-apps/ion-torrent-typing-read-processor/5",
                "sbg:job": {
                    "allocatedResources": {
                        "cpu": 1,
                        "mem": 2000
                    },
                    "inputs": {
                        "create_lineage_table_output": true,
                        "parameter_file": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/parameter_file.ext"
                        },
                        "barcode_list": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/barcode_list.ext"
                        },
                        "bam_json": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "path/to/ IonXpress_075_Auto_user_S5XL-0039-25-2017-01-10_RD111_HPV-T_T163_SUCCEED_104_005.split.json"
                        },
                        "lineage_reference_table": {
                            "size": 0,
                            "secondaryFiles": [],
                            "class": "File",
                            "path": "/path/to/lineage_reference_table.ext"
                        }
                    }
                },
                "inputs": [
                    {
                        "id": "#parameter_file",
                        "default": "",
                        "streamable": false,
                        "required": false,
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "secondaryFiles": [],
                            "separate": true,
                            "sbg:cmdInclude": true,
                            "position": 0
                        }
                    },
                    {
                        "required": false,
                        "id": "#lineage_reference_table",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "streamable": false
                    },
                    {
                        "id": "#create_lineage_table_output",
                        "default": "",
                        "streamable": false,
                        "required": false,
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "inputBinding": {
                            "position": 0,
                            "separate": true,
                            "sbg:cmdInclude": true
                        }
                    },
                    {
                        "id": "#barcode_list",
                        "type": [
                            "null",
                            "File"
                        ],
                        "required": false
                    },
                    {
                        "id": "#bam_json",
                        "default": "",
                        "streamable": false,
                        "required": false,
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "secondaryFiles": [],
                            "separate": true,
                            "sbg:cmdInclude": true,
                            "position": 0
                        }
                    }
                ],
                "sbg:latestRevision": 5,
                "$namespaces": {
                    "sbg": "https://sevenbridges.com"
                },
                "id": "dave/cgr-apps/ion-torrent-typing-read-processor/5",
                "sbg:createdBy": "dave",
                "x": 852.1156005859375,
                "cwlVersion": "sbg:draft-2",
                "sbg:contributors": [
                    "dave"
                ],
                "sbg:modifiedOn": 1527697061,
                "outputs": [
                    {
                        "id": "#read_metrics",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "outputBinding": {
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*read_metrics.json'"
                            }
                        },
                        "streamable": false
                    },
                    {
                        "id": "#hpv_types",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "outputBinding": {
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*bc2_demultiplex.json'"
                            }
                        },
                        "streamable": false
                    },
                    {
                        "id": "#hpv_lineage",
                        "type": [
                            "null",
                            "File"
                        ],
                        "default": "",
                        "outputBinding": {
                            "glob": {
                                "engine": "#cwl-js-engine",
                                "class": "Expression",
                                "script": "'*_hpv_lineage.json'"
                            }
                        },
                        "streamable": false
                    }
                ],
                "class": "CommandLineTool",
                "y": 670.492431640625,
                "sbg:revision": 5,
                "sbg:image_url": null,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "Rscript",
                    "-e",
                    "'is_batch=\"true\";",
                    "source(\"ion_torrent_typing_read_processor.R\")'"
                ],
                "sbg:sbgMaintained": false,
                "sbg:createdOn": 1526505561,
                "sbg:modifiedBy": "dave",
                "sbg:project": "dave/cgr-apps",
                "label": "ion_torrent_typing_read_processor",
                "sbg:appVersion": [
                    "sbg:draft-2"
                ]
            },
            "scatter": "#ion_torrent_typing_read_processor_1.bam_json",
            "sbg:x": 852.1156005859375,
            "sbg:y": 670.492431640625,
            "inputs": [
                {
                    "id": "#ion_torrent_typing_read_processor_1.parameter_file",
                    "source": "#parameter_file"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.lineage_reference_table",
                    "source": "#lineage_reference_table"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.create_lineage_table_output"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.barcode_list",
                    "source": "#barcode_list"
                },
                {
                    "id": "#ion_torrent_typing_read_processor_1.bam_json",
                    "source": "#Sambamba_View.filtered"
                }
            ]
        }
    ],
    "outputs": [
        {
            "id": "#read_metrics_csv",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.read_metrics_csv"
            ],
            "required": false,
            "sbg:y": 654.3377075195312,
            "sbg:x": 2000.58447265625,
            "label": "#read_metrics_csv"
        },
        {
            "id": "#hpv_read_counts_matrix",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.hpv_read_counts_matrix"
            ],
            "required": false,
            "sbg:y": 1003.5979641319502,
            "sbg:x": 2031.8892831868293,
            "label": "#hpv_read_counts_matrix"
        },
        {
            "id": "#pos_neg_matrix",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.pos_neg_matrix"
            ],
            "required": false,
            "sbg:y": 776.9196166992188,
            "sbg:x": 2072.39208984375,
            "label": "#pos_neg_matrix"
        },
        {
            "id": "#pdf_report",
            "type": [
                "null",
                {
                    "type": "array",
                    "items": "File"
                }
            ],
            "source": [
                "#ion_typeseqer_report.pdf_report"
            ],
            "required": false,
            "sbg:y": 249.97389221191406,
            "sbg:x": 2117.765380859375,
            "label": "#pdf_report"
        },
        {
            "id": "#samples_only_matrix",
            "type": [
                "null",
                {
                    "type": "array",
                    "items": "File"
                }
            ],
            "source": [
                "#ion_typeseqer_report.samples_only_matrix"
            ],
            "required": false,
            "sbg:y": 21.809043884277344,
            "sbg:x": 1896.36181640625,
            "label": "#samples_only_matrix"
        },
        {
            "id": "#failed_samples_matrix",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.failed_samples_matrix"
            ],
            "required": false,
            "sbg:y": 330.0703125,
            "sbg:x": 2016.3116455078125,
            "label": "#failed_samples_matrix"
        },
        {
            "id": "#control_matrix",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.control_matrix"
            ],
            "required": false,
            "sbg:y": 409.1229553222656,
            "sbg:x": 1887.3902587890625,
            "label": "#control_matrix"
        },
        {
            "sbg:includeInPorts": true,
            "id": "#plot_data",
            "type": [
                "null",
                {
                    "type": "array",
                    "items": "File"
                }
            ],
            "source": [
                "#ion_typeseqer_report.plot_data"
            ],
            "required": false,
            "sbg:y": 878.2462158203125,
            "sbg:x": 2094.200927734375,
            "label": "#plot_data"
        },
        {
            "id": "#lineage_table",
            "type": [
                "null",
                "File"
            ],
            "source": [
                "#ion_typeseqer_report.lineage_table"
            ],
            "required": false,
            "sbg:y": 51.64321517944336,
            "sbg:x": 2022.542724609375,
            "label": "#lineage_table"
        }
    ],
    "sbg:createdOn": 1526931208,
    "sbg:toolkit": "hpv_typing",
    "sbg:latestRevision": 62,
    "class": "Workflow",
    "sbg:id": "dave/cgr-apps/ion-hpv-typeseqer/62",
    "sbg:toolkitVersion": "",
    "sbg:validationErrors": [],
    "inputs": [
        {
            "id": "#parameter_file",
            "type": [
                "null",
                "File"
            ],
            "label": "parameter_file",
            "sbg:y": 851.0724487304688,
            "sbg:x": 154.1618194580078
        },
        {
            "id": "#lineage_reference_table",
            "type": [
                "null",
                "File"
            ],
            "label": "lineage_reference_table",
            "sbg:y": 982.7135620117188,
            "sbg:x": 53.055274963378906
        },
        {
            "sbg:includeInPorts": true,
            "id": "#input",
            "label": "bam",
            "sbg:fileTypes": "BAM, SAM",
            "sbg:y": -22.762008666992188,
            "type": [
                {
                    "type": "array",
                    "items": "File"
                }
            ],
            "secondaryFiles": [
                ".bai"
            ],
            "sbg:x": 63.477474212646484
        },
        {
            "id": "#run_manifest",
            "type": [
                "null",
                "File"
            ],
            "label": "run_manifest",
            "sbg:y": 174.097900390625,
            "sbg:x": -38.45930480957031
        },
        {
            "id": "#barcode_list",
            "type": [
                "null",
                "File"
            ],
            "label": "barcode_list",
            "sbg:y": 1024.540283203125,
            "sbg:x": 232.76622009277344
        },
        {
            "sbg:includeInPorts": true,
            "id": "#control_definitions",
            "label": "control_definitions",
            "sbg:y": 303.99859619140625,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -81.65652465820312
        },
        {
            "sbg:includeInPorts": true,
            "id": "#report_grouping",
            "label": "report_grouping",
            "sbg:y": 63.10072326660156,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -26.0455265045166
        },
        {
            "sbg:includeInPorts": true,
            "id": "#scaling_table",
            "label": "#scaling_table",
            "sbg:fileTypes": "CSV",
            "sbg:y": 1086.0753173828125,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": 367.56280517578125
        },
        {
            "sbg:includeInPorts": true,
            "id": "#pos_neg_filtering_criteria_path",
            "label": "#pos_neg_filtering_criteria_path",
            "sbg:y": 751.422119140625,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": 10.055275917053223
        },
        {
            "id": "#manifest_json_parse_passthrough",
            "type": [
                "null",
                "boolean"
            ]
        },
        {
            "id": "#control_def_json_parse_passthrough",
            "type": [
                "null",
                "boolean"
            ]
        },
        {
            "id": "#report_grouping_json_parse_passthrough",
            "type": [
                "null",
                "boolean"
            ]
        },
        {
            "sbg:suggestedValue": 8000,
            "id": "#mem_mb",
            "label": "Memory in MB",
            "sbg:stageInput": null,
            "description": "Memory in MB.",
            "type": [
                "null",
                "int"
            ],
            "sbg:toolDefaultValue": "1024",
            "sbg:category": "Execution"
        },
        {
            "id": "#is_torrent_server",
            "type": [
                "null",
                "boolean"
            ]
        }
    ],
    "sbg:sbgMaintained": false,
    "sbg:createdBy": "dave",
    "sbg:appVersion": [
        "sbg:draft-2"
    ],
    "sbg:projectName": "CGR_Apps",
    "description": "",
    "sbg:project": "dave/cgr-apps",
    "sbg:categories": [
        "hpv_typing"
    ]
}
