FROM ubuntu:16.04

RUN apt-get update \
 	&& apt-get install -y --no-install-recommends \
 	software-properties-common \
 	libcurl4-openssl-dev \
	libxml2-dev \
	libxml2-dev \
  	libcairo2-dev \
  	libsqlite-dev \
  	libmariadbd-dev \
	libmariadbclient-dev \
  	libpq-dev \
  	libssh2-1-dev \
	libpng-dev \
	libglu1-mesa-dev \
	libv8-dev \
	ed \
	curl \
	wget \
	less \
	locales \
	vim-tiny \
	ca-certificates \
	git \
        pandoc \ 
        texlive-latex-recommended \
        texlive-latex-extra \
        texlive-fonts-recommended \
        texlive-fonts-extra \
	autoconf \
	automake \
	make \
	g++ \
	gcc \
	build-essential \ 
	zlib1g-dev \
	libgsl0-dev \
	perl \
	curl \
	wget \
	unzip \
	tabix \
	libncurses5-dev \
	&& add-apt-repository -y "ppa:marutter/rrutter" \
	&& add-apt-repository -y "ppa:marutter/c2d4u" \
  	&& apt-get update

RUN echo "en_US.UTF-8 UTF-8" >> /etc/locale.gen \
	&& locale-gen en_US.utf8 \
	&& /usr/sbin/update-locale LANG=en_US.UTF-8

RUN apt-get install -y --no-install-recommends \
	pandoc \
  	r-cran-littler \
	r-base \
	r-base-dev \
	r-recommended \
	&& R -e "source('https://bioconductor.org/biocLite.R')" \
	
&& echo 'options(repos = c(CRAN = "https://cran.rstudio.com/"), download.file.method = "wget")' >> /etc/R/Rprofile.site \
	&& ln -s /usr/lib/R/site-library/littler/examples/install.r /usr/local/bin/install.r \
	&& ln -s /usr/lib/R/site-library/littler/examples/install2.r /usr/local/bin/install2.r \
	&& ln -s /usr/lib/R/site-library/littler/examples/installGithub.r /usr/local/bin/installGithub.r \
	&& ln -s /usr/lib/R/site-library/littler/examples/testInstalled.r /usr/local/bin/testInstalled.r \

&& rm -rf /tmp/downloaded_packages/ /tmp/*.rds

ENV LC_ALL en_US.UTF-8

ENV LANG en_US.UTF-8

# bwa
RUN git clone https://github.com/lh3/bwa && \
	cd bwa && \
	git checkout 0.7.10 &&  \
	make && cp bwa /usr/local/bin/bwa

# Installing Java 8.... dockerfile snippet from https://github.com/dockerfile/java/blob/master/oracle-java8/Dockerfile
RUN \
  echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | debconf-set-selections && \
  add-apt-repository -y ppa:webupd8team/java && \
  apt-get update && \
  apt-get install -y oracle-java8-installer && \
  rm -rf /var/lib/apt/lists/* && \
  rm -rf /var/cache/oracle-jdk8-installer

# Define commonly used JAVA_HOME variable
ENV JAVA_HOME /usr/lib/jvm/java-8-oracle
ENV JAVA_LIBRARY_PATH /usr/lib/jni
